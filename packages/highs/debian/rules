#!/usr/bin/make -f

export DEB_BUILD_MAINT_OPTIONS = hardening=+all
include /usr/share/dpkg/buildflags.mk
CFLAGS+=$(CPPFLAGS)
CXXFLAGS+=$(CPPFLAGS)
DPKG_EXPORT_BUILDFLAGS = 1
DEB_HOST_MULTIARCH ?= $(shell dpkg-architecture -qDEB_HOST_MULTIARCH)

%:
	dh $@ --buildsystem=cmake



override_dh_auto_configure:
	dh_auto_configure -- \
            -DCMAKE_BUILD_TYPE:STRING=RelWithDebInfo \
	    -DCMAKE_CXX_COMPILER=/usr/bin/g++ \
	    -DCMAKE_C_COMPILER=/usr/bin/gcc \
	    -DCMAKE_INTERPROCEDURAL_OPTIMIZATION=OFF \
            -DCMAKE_INSTALL_PREFIX:PATH=/usr \
            -DCMAKE_INSTALL_LIBDIR:PATH=lib/$(DEB_HOST_MULTIARCH) \
	    -DCMAKE_UNITY_BUILD=ON \
	    -DBUILD_EXAMPLES=OFF -DBUILD_TESTING=OFF \
            -DINSTALL_DESTDIR:PATH=$(CURDIR)/debian/tmp

override_dh_installman:
	echo "ok"
